<!DOCTYPE HTML>
<html>
<head>

    <title>Migrer d&#39;un WordPress vers Hugo :: vonKrafft.fr</title>

    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.70.0" />

    <link rel="shortcut icon" href='/img/favicon.png' type="image/png" />
    <link rel="apple-touch-icon" href='/img/apple-touch-icon.png' />
    <link rel="apple-touch-icon" sizes="57x57" href='/img/apple-touch-icon-57x57.png' />
    <link rel="apple-touch-icon" sizes="72x72" href='/img/apple-touch-icon-72x72.png' />
    <link rel="apple-touch-icon" sizes="76x76" href='/img/apple-touch-icon-76x76.png' />
    <link rel="apple-touch-icon" sizes="114x114" href='/img/apple-touch-icon-114x114.png' />
    <link rel="apple-touch-icon" sizes="120x120" href='/img/apple-touch-icon-120x120.png' />
    <link rel="apple-touch-icon" sizes="144x144" href='/img/apple-touch-icon-144x144.png' />
    <link rel="apple-touch-icon" sizes="152x152" href='/img/apple-touch-icon-152x152.png' />
    <link rel="apple-touch-icon" sizes="180x180" href='/img/apple-touch-icon-180x180.png' />

    <link rel="canonical" href="/guides/migrer-wordpress-vers-hugo/" />
    <link rel="alternative" href="/index.xml" title="vonKrafft" type="application/atom+xml" />

    <meta name="renderer" content="webkit" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="format-detection" content="telephone=no,email=no,adress=no" />
    <meta http-equiv="Cache-Control" content="no-transform" />

    <meta name="robots" content="index,follow" />
    
    

    

        <meta name="author" content='' />
        <meta name="description" content="Ayant récement migré de WordPress vers Hugo, j&amp;rsquo;ai eu besoin d&amp;rsquo;exporter le contenu de la base de données vers des fichiers Markdown, mais aussi revoir l&amp;rsquo;organisation des ressources, notamment les images. Pour cela, j&amp;rsquo;ai implémenté quelques scripts que je me propose ici de partager.
  " />

        
            <meta name="twitter:card" content="summary_large_image" />
            <meta name="twitter:image" content="https://vonkrafft.fr/media/2018/01/f6840c5d35c17f43623f8cb9eb7d6f7e.png" />
        

        <meta name="twitter:site" content="@" />
        <meta name="twitter:title" content="Migrer d&#39;un WordPress vers Hugo" />
        <meta name="twitter:description" content="Ayant récement migré de WordPress vers Hugo, j&amp;rsquo;ai eu besoin d&amp;rsquo;exporter le contenu de la base de données vers des fichiers Markdown, mais aussi revoir l&amp;rsquo;organisation des ressources, notamment les images. Pour cela, j&amp;rsquo;ai implémenté quelques scripts que je me propose ici de partager.
  " />

    

    <link rel="stylesheet" href='/css/highlight-github.min.css'>
    <link rel="stylesheet" href='/css/raleway.css'>
    <link rel="stylesheet" href='/css/sourcesanspro.css'>
    <link rel="stylesheet" href='/css/font-awesome.min.css'>
    <link rel="stylesheet" href='/css/jquery.fancybox.min.css'>
    <link rel="stylesheet" href='/css/main.css'>
    <link rel="stylesheet" href='/css/academicons.min.css'>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-24449159-3', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>
<body>

    
    <div id="wrapper">

    
    
<header id="header">
    <h1><a href="/">vonKrafft</a></h1>

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/securite/">
                            <i class="fa fa-lock">&nbsp;</i>Sécurité
                    </a>
                </li>
            
                <li>
                    <a href="/console/">
                            <i class="fa fa-code">&nbsp;</i>Console
                    </a>
                </li>
            
                <li>
                    <a href="/actus/">
                            <i class="fa fa-newspaper-o">&nbsp;</i>Actus
                    </a>
                </li>
            
                <li>
                    <a href="/dossiers/">
                            <i class="fa fa-book">&nbsp;</i>Dossiers
                    </a>
                </li>
            
                <li>
                    <a href="/guides/">
                            <i class="fa fa-laptop">&nbsp;</i>Guides
                    </a>
                </li>
            
                <li>
                    <a href="/tutoriels/">
                            <i class="fa fa-flask">&nbsp;</i>Tuto
                    </a>
                </li>
            
                <li>
                    <a href="/works/">
                            <i class="fa fa-rocket">&nbsp;</i>Works
                    </a>
                </li>
            
                <li>
                    <a href="/contact/">
                            <i class="fa fa-id-card-o">&nbsp;</i>Contact
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/securite/">
                            <h3>
                                <i class="fa fa-lock">&nbsp;</i>Sécurité
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/console/">
                            <h3>
                                <i class="fa fa-code">&nbsp;</i>Console
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/actus/">
                            <h3>
                                <i class="fa fa-newspaper-o">&nbsp;</i>Actus
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/dossiers/">
                            <h3>
                                <i class="fa fa-book">&nbsp;</i>Dossiers
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/guides/">
                            <h3>
                                <i class="fa fa-laptop">&nbsp;</i>Guides
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/tutoriels/">
                            <h3>
                                <i class="fa fa-flask">&nbsp;</i>Tuto
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/works/">
                            <h3>
                                <i class="fa fa-rocket">&nbsp;</i>Works
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/contact/">
                            <h3>
                                <i class="fa fa-id-card-o">&nbsp;</i>Contact
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section class="recent-posts">
            <div class="mini-posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                

                
                    
                

                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/write-up/ctf-tamu-obituary-500/">[EN] [CTF] TAMU - Obituary</a></h3>
                                
                                <time class="published" datetime=
                                    '2020-03-30'>
                                    30 mars 2020</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/tutoriels/prises-conectees-sonoff-tasmota/">Des prises connectées Sonoff avec Tasmota</a></h3>
                                
                                <time class="published" datetime=
                                    '2020-03-29'>
                                    29 mars 2020</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/write-up/ctf-esgi-my-name-is-rookie-350/">[CTF] ESGI - My Name is Rookie</a></h3>
                                
                                <time class="published" datetime=
                                    '2019-04-07'>
                                    7 avril 2019</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/console/serveur-web-docker-nginx-php-postgres/">Serveur Web avec Docker : Nginx, PHP et PostgreSQL</a></h3>
                                
                                <time class="published" datetime=
                                    '2019-03-18'>
                                    18 mars 2019</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/guides/installer-python-3.7-debian-9-strecth/">Installer Python 3.7 sur Debian 9 Stretch</a></h3>
                                
                                <time class="published" datetime=
                                    '2019-03-04'>
                                    4 mars 2019</time>
                            </header>
                            

                        </article>
                

                
                    <a href=
                        
                            /page/2
                        
                        class="button">Voir plus d'articles</a>
                
            </div>
        </section>

    
        
</section>

    <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            



<li>
  <a href="//twitter.com/share?url=%2fguides%2fmigrer-wordpress-vers-hugo%2f&amp;text=Migrer%20d%27un%20WordPress%20vers%20Hugo&amp;via=v0nkrafft" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
    </a>
</li>




<li>
  <a href="//plus.google.com/share?url=%2fguides%2fmigrer-wordpress-vers-hugo%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
    <p>Google+</p>
  </a>
</li>





<li>
  <a href="//www.facebook.com/sharer/sharer.php?u=%2fguides%2fmigrer-wordpress-vers-hugo%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
    </a>
</li>




<li>
  <a href="//reddit.com/submit?url=%2fguides%2fmigrer-wordpress-vers-hugo%2f&amp;title=Migrer%20d%27un%20WordPress%20vers%20Hugo" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
  </a>
</li>




<li>
  <a href="//www.linkedin.com/shareArticle?url=%2fguides%2fmigrer-wordpress-vers-hugo%2f&amp;title=Migrer%20d%27un%20WordPress%20vers%20Hugo" target="_blank" class="share-btn linkedin">
      <i class="fa fa-linkedin"></i>
      <p>LinkedIn</p>
    </a>
</li>




<li>
  <a href="//www.stumbleupon.com/submit?url=%2fguides%2fmigrer-wordpress-vers-hugo%2f&amp;title=Migrer%20d%27un%20WordPress%20vers%20Hugo" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
  </a>
</li>




<li>
  <a href="//www.pinterest.com/pin/create/button/?url=%2fguides%2fmigrer-wordpress-vers-hugo%2f&amp;description=Migrer%20d%27un%20WordPress%20vers%20Hugo" target="_blank" class="share-btn pinterest">
    <i class="fa fa-pinterest-p"></i>
    <p>Pinterest</p>
  </a>
</li>




<li>
  <a href="mailto:?subject=Check out this post by &amp;body=%2fguides%2fmigrer-wordpress-vers-hugo%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
  </a>
</li>


        </ul>
    </section>
</section>

    
    <div id="main">
        
        
        <article class="post">
  <header>
    <div class="cover" style="background-image: url(/media/2018/01/f6840c5d35c17f43623f8cb9eb7d6f7e.png)"></div>
    <div class="title">
        
            <h1><a href="/guides/migrer-wordpress-vers-hugo/">Migrer d&#39;un WordPress vers Hugo</a></h1>
            
        
        
            <p>Guide et scripts PHP pour migrer le contenu de son site WordPress vers un générateur de site statique tel que Hugo.</p>
        
    </div>
    <div class="meta meta-guides">
        

        <time class="published"
            datetime='2018-01-05'>
            5 janvier 2018</time>

        
            <p>11 minutes de lecture</p>
        
    </div>
</header>


  

  

  <div id="content">
    <p>Ayant récement migré de WordPress vers Hugo, j&rsquo;ai eu besoin d&rsquo;exporter le contenu de la base de données vers des fichiers Markdown, mais aussi revoir l&rsquo;organisation des ressources, notamment les images. Pour cela, j&rsquo;ai implémenté quelques scripts que je me propose ici de partager.</p>



    
    
        
        
        
        
        
    

    
    
    
    

    
    







  


    

    <figure>
        
            <span class="image center">
                <img src="/media/2018/01/f6840c5d35c17f43623f8cb9eb7d6f7e.png" alt="">
            </span>
        
        
    </figure>


<p>Depuis novembre 2013, le site <strong>Tuto Wibb</strong> était géré avec un WordPress. Fin 2017, j&rsquo;ai décidé d&rsquo;ajouter une partie blog à mon site perso et donc de fusionner <strong>vonKrafft.fr</strong> et <strong>Tuto Wibb</strong>. J&rsquo;en ai profité pour abandonner WordPress, trop lourd pour mes besoins, et surtout trop compliqué à maintenir avec l&rsquo;avalanche de mise à jour et de patchs de sécurité de la part de WordPress, mais aussi des plugins &hellip;</p>
<p>J&rsquo;ai donc porté mon intérêt sur <a href="https://gohugo.io/">Hugo</a>, un générateur de site statique implémenté en Golang. Le principe est simple : le contenu est rédigé en Markdown, auquel on y ajoute des templates en HTML et des ressources variées (images, CSS, JavaScript &hellip;). Hugo se charge ensuite de générer les pages HTML. Plus de requêtes dynamiques, fini le PHP de WordPress : tout est <strong>statique</strong>. Cela permet aussi de versionner le contenu de <strong>vonKrafft.fr</strong> sur <a href="https://github.com/vonKrafft/vonkrafft-hugo">GitHub</a>.</p>
<p>Se pose alors le problème de la migration. Le contenu des articles est actuellement dans une <strong>base de données</strong>, les images sont dans <code>wp-content/uploads</code> et l&rsquo;organisation par catégorie est géré par deux tables de la base de données &hellip; Bref, un joli bazar !</p>
<h2 id="exporter-les-articles-en-markdown">Exporter les articles en Markdown</h2>
<p>La première étape consite à exporter les articles (les types <code>post</code> dans WordPress) et de créer des fichiers Markdown compréhensibles par Hugo. Le contenu des articles se trouve dans la table <code>wp_posts</code>, et nous voulons récupérer uniquement les articles de type <code>post</code> publiés.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-PHP" data-lang="PHP">$wpdb-&gt;get_var(&#34;SELECT GROUP_CONCAT(`ID`) FROM `wp_posts` WHERE `post_status` LIKE &#39;publish&#39; AND `post_type` LIKE &#39;post&#39;&#34;);</code></pre></td></tr></table>
</div>
</div>
<p>Cela permet d&rsquo;obtenir la liste des ID des articles à exporter. Nous itérerons par la suite sur la liste de ces ID. Pour chaque article, il faut à présent récupérer le contenu et les informations additionnelles de la table <code>wp_posts</code>. Dans mon cas, j&rsquo;ai aussi besoin de la catégorie, la liste des tags et la description SEO de l&rsquo;article.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-PHP" data-lang="PHP">$current_post = $wpdb-&gt;get_row($wpdb-&gt;prepare(&#34;SELECT * FROM `wp_posts` WHERE `ID` = %d&#34;, array($id)));
$current_term = $wpdb-&gt;get_results($wpdb-&gt;prepare(&#34;SELECT `name`, `slug` FROM `wp_term_taxonomy` AS tt JOIN `wp_term_relationships` AS tr ON tt.`term_taxonomy_id` = tr.`term_taxonomy_id` JOIN `wp_terms` AS t ON tt.`term_id` = t.`term_id` WHERE tr.`object_id` = %d AND tt.`taxonomy` = %s&#34;, array($id, &#39;category&#39;)));
$current_tags = $wpdb-&gt;get_results($wpdb-&gt;prepare(&#34;SELECT `name`, `slug` FROM `wp_term_taxonomy` AS tt JOIN `wp_term_relationships` AS tr ON tt.`term_taxonomy_id` = tr.`term_taxonomy_id` JOIN `wp_terms` AS t ON tt.`term_id` = t.`term_id` WHERE tr.`object_id` = %d AND tt.`taxonomy` = %s&#34;, array($id, &#39;post_tag&#39;)), OBJECT_K);
$current_desc = $wpdb-&gt;get_var($wpdb-&gt;prepare(&#34;SELECT `meta_value` FROM `wp_postmeta` WHERE `post_id` = %d AND `meta_key` = %s&#34;, array($id, &#39;_yoast_wpseo_metadesc&#39;)));</code></pre></td></tr></table>
</div>
</div>
<p>Ensuite, il faut construire le contenu du fichier. Hugo utilise un format d&rsquo;en-tête spécifique pour les métadonnées de la page : les Front Matter (de l&rsquo;anglais &ldquo;avant-propos&rdquo;). En TOML, YAML ou JSON, ils doivent être placés au début du fichier. Pour ma part, j&rsquo;ai choisi le format YAML délimité par <code>---</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-PHP" data-lang="PHP">function get_post_content($id)
{
	global $wpdb;
	
	$current_post = $wpdb-&gt;get_row($wpdb-&gt;prepare(&#34;SELECT * FROM `wp_posts` WHERE `ID` = %d&#34;, array($id)));
	$current_term = $wpdb-&gt;get_results($wpdb-&gt;prepare(&#34;SELECT `name`, `slug` FROM `wp_term_taxonomy` AS tt JOIN `wp_term_relationships` AS tr ON tt.`term_taxonomy_id` = tr.`term_taxonomy_id` JOIN `wp_terms` AS t ON tt.`term_id` = t.`term_id` WHERE tr.`object_id` = %d AND tt.`taxonomy` = %s&#34;, array($id, &#39;category&#39;)));
	$current_tags = $wpdb-&gt;get_results($wpdb-&gt;prepare(&#34;SELECT `name`, `slug` FROM `wp_term_taxonomy` AS tt JOIN `wp_term_relationships` AS tr ON tt.`term_taxonomy_id` = tr.`term_taxonomy_id` JOIN `wp_terms` AS t ON tt.`term_id` = t.`term_id` WHERE tr.`object_id` = %d AND tt.`taxonomy` = %s&#34;, array($id, &#39;post_tag&#39;)), OBJECT_K);
	$current_desc = $wpdb-&gt;get_var($wpdb-&gt;prepare(&#34;SELECT `meta_value` FROM `wp_postmeta` WHERE `post_id` = %d AND `meta_key` = %s&#34;, array($id, &#39;_yoast_wpseo_metadesc&#39;)));

	$markdown = &#39;&#39;;
	$markdown .= &#39;---&#39; . PHP_EOL;
	$markdown .= &#39;title: &#34;&#39; . addslashes($current_post-&gt;post_title) . &#39;&#34;&#39; . PHP_EOL;
	$markdown .= &#39;description: &#34;&#39; . addslashes($current_desc) . &#39;&#34;&#39; . PHP_EOL;
	$markdown .= &#39;tags: [ &#34;&#39; . implode(&#39;&#34;, &#34;&#39;, array_keys($current_tags)) . &#39;&#34; ]&#39; . PHP_EOL;
	$markdown .= &#39;lastmod: &#34;&#39; . $current_post-&gt;post_modified . &#39;&#34;&#39; . PHP_EOL;
	$markdown .= &#39;date: &#34;&#39; . $current_post-&gt;post_date . &#39;&#34;&#39; . PHP_EOL;
	$markdown .= &#39;categories:&#39; . PHP_EOL;
	foreach ($current_term as $cat) $markdown .= &#34;\t&#34; . &#39;- &#34;&#39; . addslashes($cat-&gt;name) . &#39;&#34;&#39; . PHP_EOL;
	$markdown .= &#39;type: page&#39; . PHP_EOL;
	$markdown .= &#39;slug: &#34;&#39; . addslashes($current_post-&gt;post_name) . &#39;&#34;&#39; . PHP_EOL;
	$markdown .= &#39;---&#39; . PHP_EOL;
	$markdown .= PHP_EOL;
	$markdown .= md($current_post-&gt;post_content);

	$path = $current_term[0]-&gt;slug;
	$filename = strstr($current_post-&gt;post_date, &#39; &#39;, TRUE) . &#39;-&#39; . $current_post-&gt;post_name . &#39;.md&#39;;

	return array($markdown, $path, $filename);
}</code></pre></td></tr></table>
</div>
</div>
<p>Vous pouvez constater que je ne prends pas le contenu brut de l&rsquo;article, mais je le fait passé par la fonction <code>md()</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-PHP" data-lang="PHP">function md($content)
{
	for ($i=1; $i <span class="p">&lt;</span> <span class="nt">7</span><span class="err">;</span> <span class="err">$</span><span class="na">i</span><span class="err">++)</span> <span class="err">{</span> 
		<span class="err">$</span><span class="na">content </span><span class="o">=</span> <span class="s">preg_replace(&#34;/&amp;lt;h$i&amp;gt;((?:.|\n)*?)&amp;lt;\/h$i&amp;gt;/&#34;,</span> <span class="na">PHP_EOL</span> <span class="err">.</span> <span class="na">str_repeat</span><span class="err">(&#39;#&#39;,</span> <span class="err">$</span><span class="na">i</span><span class="err">)</span> <span class="err">.</span> <span class="err">&#34;</span> <span class="err">$</span><span class="na">1</span><span class="err">&#34;</span> <span class="err">.</span> <span class="na">PHP_EOL</span><span class="err">,</span> <span class="err">$</span><span class="na">content</span><span class="err">);</span>
	<span class="err">}</span>
	<span class="err">$</span><span class="na">content </span><span class="o">=</span> <span class="s">preg_replace(&#39;/&amp;lt;code&amp;gt;([^&amp;lt;]*)&amp;lt;\/code&amp;gt;/&#39;,</span> <span class="err">&#34;`$</span><span class="na">1</span><span class="err">`&#34;,</span> <span class="err">$</span><span class="na">content</span><span class="err">);</span>
	<span class="err">$</span><span class="na">content </span><span class="o">=</span> <span class="s">preg_replace(&#39;/&amp;lt;(?:strong|b)&amp;gt;([^&amp;lt;]*)&amp;lt;\/(?:strong|b)&amp;gt;/&#39;,</span> <span class="err">&#34;**$</span><span class="na">1</span><span class="err">**&#34;,</span> <span class="err">$</span><span class="na">content</span><span class="err">);</span>
	<span class="err">$</span><span class="na">content </span><span class="o">=</span> <span class="s">preg_replace(&#39;/&amp;lt;(?:em|i)&amp;gt;([^&amp;lt;]*)&amp;lt;\/(?:em|i)&amp;gt;/&#39;,</span> <span class="err">&#34;*$</span><span class="na">1</span><span class="err">*&#34;,</span> <span class="err">$</span><span class="na">content</span><span class="err">);</span>
	<span class="err">$</span><span class="na">content </span><span class="o">=</span> <span class="s">preg_replace(&#39;/&amp;lt;blockquote&amp;gt;((?:.|\n)*?)&amp;lt;\/blockquote&amp;gt;/&#39;,</span> <span class="na">PHP_EOL</span> <span class="err">.</span> <span class="err">&#39;&amp;</span><span class="na">gt</span><span class="err">;</span> <span class="err">&#39;</span> <span class="err">.</span> <span class="na">str_replace</span><span class="err">(&#39;\</span><span class="na">n</span><span class="err">&#39;,</span> <span class="na">PHP_EOL</span> <span class="err">.</span> <span class="err">&#39;&amp;</span><span class="na">gt</span><span class="err">;</span> <span class="err">&#39;,</span> <span class="err">&#34;$</span><span class="na">1</span><span class="err">&#34;),</span> <span class="err">$</span><span class="na">content</span><span class="err">);</span>
	<span class="err">$</span><span class="na">content </span><span class="o">=</span> <span class="s">preg_replace(&#39;/&amp;lt;hr(</span> <span class="err">\/)?&amp;</span><span class="na">gt</span><span class="err">;/&#39;,</span> <span class="err">&#34;</span><span class="na">---</span><span class="err">&#34;,</span> <span class="err">$</span><span class="na">content</span><span class="err">);</span>
	<span class="err">$</span><span class="na">content </span><span class="o">=</span> <span class="s">preg_replace(&#39;/&amp;lt;img</span> <span class="err">[^&amp;</span><span class="na">gt</span><span class="err">;]*</span><span class="na">src</span><span class="o">=</span><span class="s">&#34;([^&#34;</span><span class="err">]*)&#34;[^&amp;</span><span class="na">gt</span><span class="err">;]*</span><span class="na">alt</span><span class="o">=</span><span class="s">&#34;([^&#34;</span><span class="err">]*)&#34;[^&amp;</span><span class="na">gt</span><span class="err">;]*&amp;</span><span class="na">gt</span><span class="err">;/&#39;,</span> <span class="err">&#34;![$</span><span class="na">2</span><span class="err">]($</span><span class="na">1</span><span class="err">)&#34;,</span> <span class="err">$</span><span class="na">content</span><span class="err">);</span>
	<span class="err">$</span><span class="na">content </span><span class="o">=</span> <span class="s">preg_replace(&#39;/&amp;lt;img</span> <span class="err">[^&amp;</span><span class="na">gt</span><span class="err">;]*</span><span class="na">alt</span><span class="o">=</span><span class="s">&#34;([^&#34;</span><span class="err">]*)&#34;[^&amp;</span><span class="na">gt</span><span class="err">;]*</span><span class="na">src</span><span class="o">=</span><span class="s">&#34;([^&#34;</span><span class="err">]*)&#34;[^&amp;</span><span class="na">gt</span><span class="err">;]*&amp;</span><span class="na">gt</span><span class="err">;/&#39;,</span> <span class="err">&#34;![$</span><span class="na">1</span><span class="err">]($</span><span class="na">2</span><span class="err">)&#34;,</span> <span class="err">$</span><span class="na">content</span><span class="err">);</span>
	<span class="err">$</span><span class="na">content </span><span class="o">=</span> <span class="s">preg_replace(&#39;/&amp;lt;a</span> <span class="err">[^&amp;</span><span class="na">gt</span><span class="err">;]*</span><span class="na">href</span><span class="o">=</span><span class="s">&#34;([^&#34;</span><span class="err">]+)&#34;[^&amp;</span><span class="na">gt</span><span class="err">;]*&amp;</span><span class="na">gt</span><span class="err">;([^&amp;</span><span class="na">lt</span><span class="err">;]*)&amp;</span><span class="na">lt</span><span class="err">;\/</span><span class="na">a</span><span class="err">&amp;</span><span class="na">gt</span><span class="err">;/&#39;,</span> <span class="err">&#34;[$</span><span class="na">2</span><span class="err">]($</span><span class="na">1</span><span class="err">)&#34;,</span> <span class="err">$</span><span class="na">content</span><span class="err">);</span>
	<span class="err">$</span><span class="na">content </span><span class="o">=</span> <span class="s">preg_replace(&#39;/\[(tw_[^\]]*)\]/&#39;,</span> <span class="err">&#34;{{&amp;</span><span class="na">lt</span><span class="err">;</span> <span class="err">$</span><span class="na">1</span> <span class="err">&amp;</span><span class="na">gt</span><span class="err">;}}&#34;,</span> <span class="err">$</span><span class="na">content</span><span class="err">);</span>
	<span class="err">$</span><span class="na">content </span><span class="o">=</span> <span class="s">preg_replace(&#39;/\[(\/tw_[^\]]*)\]/&#39;,</span> <span class="err">&#34;{{&amp;</span><span class="na">lt</span><span class="err">;</span> <span class="err">$</span><span class="na">1</span> <span class="err">&amp;</span><span class="na">gt</span><span class="err">;}}&#34;,</span> <span class="err">$</span><span class="na">content</span><span class="err">);</span>
	<span class="err">$</span><span class="na">content </span><span class="o">=</span> <span class="s">preg_replace(&#39;/https?:\/\/tuto-wibb\.krafft\.ovh\/wp-content\/uploads\/([^\)]+)/&#39;,</span> <span class="err">&#34;</span><span class="na">images</span><span class="err">/$</span><span class="na">1</span><span class="err">&#34;,</span> <span class="err">$</span><span class="na">content</span><span class="err">);</span>
	<span class="err">$</span><span class="na">content </span><span class="o">=</span> <span class="s">preg_replace(&#39;/&amp;lt;p[^&amp;gt;]*&amp;gt;((?:.|\n)*?)&amp;lt;\/p&amp;gt;/&#39;,</span> <span class="err">&#34;$</span><span class="na">1</span><span class="err">&#34;</span> <span class="err">.</span> <span class="na">PHP_EOL</span><span class="err">,</span> <span class="err">$</span><span class="na">content</span><span class="err">);</span>
	<span class="na">preg_match_all</span><span class="err">(&#39;/&amp;</span><span class="na">lt</span><span class="err">;</span><span class="na">ul</span><span class="err">[^&amp;</span><span class="na">gt</span><span class="err">;]*&amp;</span><span class="na">gt</span><span class="err">;((?</span><span class="na">:</span><span class="err">.|\</span><span class="na">n</span><span class="err">)*?)&amp;</span><span class="na">lt</span><span class="err">;\/</span><span class="na">ul</span><span class="err">&amp;</span><span class="na">gt</span><span class="err">;/&#39;,</span> <span class="err">$</span><span class="na">content</span><span class="err">,</span> <span class="err">$</span><span class="na">ul_array</span><span class="err">,</span> <span class="na">PREG_SET_ORDER</span><span class="err">,</span> <span class="na">0</span><span class="err">);</span>
	<span class="na">foreach</span> <span class="err">($</span><span class="na">ul_array</span> <span class="na">as</span> <span class="err">$</span><span class="na">ul</span><span class="err">)</span> <span class="err">{</span>
		<span class="err">$</span><span class="na">content </span><span class="o">=</span> <span class="s">str_replace($ul[0],</span> <span class="na">preg_replace</span><span class="err">(&#39;/\</span><span class="na">s</span><span class="err">+&amp;</span><span class="na">lt</span><span class="err">;</span><span class="na">li</span><span class="err">[^&amp;</span><span class="na">gt</span><span class="err">;]*&amp;</span><span class="na">gt</span><span class="err">;((?</span><span class="na">:</span><span class="err">.|\</span><span class="na">n</span><span class="err">)*?)&amp;</span><span class="na">lt</span><span class="err">;\/</span><span class="na">li</span><span class="err">&amp;</span><span class="na">gt</span><span class="err">;/&#39;,</span> <span class="na">PHP_EOL</span> <span class="err">.</span> <span class="err">&#34;</span><span class="na">-</span> <span class="err">$</span><span class="na">1</span><span class="err">&#34;,</span> <span class="err">$</span><span class="na">ul</span><span class="err">[</span><span class="na">1</span><span class="err">]),</span> <span class="err">$</span><span class="na">content</span><span class="err">);</span>
	<span class="err">}</span>
	<span class="na">preg_match_all</span><span class="err">(&#39;/&amp;</span><span class="na">lt</span><span class="err">;</span><span class="na">ol</span><span class="err">[^&amp;</span><span class="na">gt</span><span class="err">;]*&amp;</span><span class="na">gt</span><span class="err">;((?</span><span class="na">:</span><span class="err">.|\</span><span class="na">n</span><span class="err">)*?)&amp;</span><span class="na">lt</span><span class="err">;\/</span><span class="na">ol</span><span class="err">&amp;</span><span class="na">gt</span><span class="err">;/&#39;,</span> <span class="err">$</span><span class="na">content</span><span class="err">,</span> <span class="err">$</span><span class="na">ol_array</span><span class="err">,</span> <span class="na">PREG_SET_ORDER</span><span class="err">,</span> <span class="na">0</span><span class="err">);</span>
	<span class="na">foreach</span> <span class="err">($</span><span class="na">ol_array</span> <span class="na">as</span> <span class="err">$</span><span class="na">ol</span><span class="err">)</span> <span class="err">{</span>
		<span class="err">$</span><span class="na">content </span><span class="o">=</span> <span class="s">str_replace($ol[0],</span> <span class="na">preg_replace</span><span class="err">(&#39;/\</span><span class="na">s</span><span class="err">+&amp;</span><span class="na">lt</span><span class="err">;</span><span class="na">li</span><span class="err">[^&amp;</span><span class="na">gt</span><span class="err">;]*&amp;</span><span class="na">gt</span><span class="err">;((?</span><span class="na">:</span><span class="err">.|\</span><span class="na">n</span><span class="err">)*?)&amp;</span><span class="na">lt</span><span class="err">;\/</span><span class="na">li</span><span class="err">&amp;</span><span class="na">gt</span><span class="err">;/&#39;,</span> <span class="na">PHP_EOL</span> <span class="err">.</span> <span class="err">&#34;</span><span class="na">1</span><span class="err">.</span> <span class="err">$</span><span class="na">1</span><span class="err">&#34;,</span> <span class="err">$</span><span class="na">ol</span><span class="err">[</span><span class="na">1</span><span class="err">]),</span> <span class="err">$</span><span class="na">content</span><span class="err">);</span>
	<span class="err">}</span>
	<span class="na">return</span> <span class="err">$</span><span class="na">content</span><span class="err">;</span>
<span class="err">}</span></code></pre></td></tr></table>
</div>
</div>
<p>Bon, la fonction n&rsquo;est pas parfaite, loin de là, mais je n&rsquo;ai pas trouvé mieux (sinon utiliser une bibliothèque PHP-Markdown pour faire le boulot). Si vous avez des idées, n&rsquo;hésitez pas à me le dire : c&rsquo;est trop tard pour ma migration mais ça peut en aider d&rsquo;autres. Quoi qu&rsquo;il en soit, je dois repasser par chaque article pour vérifier que tout est bien passé en Markdown.</p>
<p>Après quelques tests, il ne nous reste plus qu&rsquo;à automatiser le tout et créer les fichiers de sortie. Une boucle sur la liste des ID des articles, et le tour est joué :)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-PHP" data-lang="PHP">$posts = $wpdb-&gt;get_var(&#34;SELECT GROUP_CONCAT(`ID`) FROM `wp_posts` WHERE `post_status` LIKE &#39;publish&#39; AND `post_type` LIKE &#39;post&#39;&#34;);
foreach ($posts as $id) {
	list($content, $category, $filename) = get_content($id);
	mkdir(&#39;hugo/&#39; . $category, 0755, TRUE);
	file_put_contents(&#39;hugo/&#39; . $category . &#39;/&#39; . $filename, $content);
}</code></pre></td></tr></table>
</div>
</div>
<p>Et voilà, on se retrouve avec nos fichiers Markdown ! Il suffit de tout mettre dans le répertoire <code>content</code> de Hugo et c&rsquo;est terminé.</p>
<h2 id="exporter-les-pages-en-markdown">Exporter les pages en Markdown</h2>
<p>C&rsquo;est presque identique à l&rsquo;exportation des articles. L&rsquo;en-tête du fichier change légèrement : on n&rsquo;a plus de description, de tags, de catégorie et de slug, et le type n&rsquo;est plus <code>post</code> mais <code>page</code>. Pour ce qui est du chemin du fichier Markdown, il y a deux cas possibles :</p>
<ul>
<li>La page n&rsquo;a pas de page parente, dans ce cas là elle est enregistrée dans <code>/nom-de-la-page/_index.md</code> ;</li>
<li>La page a une page parente, dans ce cas là elle est enregistrée dans <code>/nom-du-parent/nom-de-la-page.md</code>.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-PHP" data-lang="PHP">function get_page_content($id)
{
	global $wpdb;
	
	$current_page = $wpdb-&gt;get_row($wpdb-&gt;prepare(&#34;SELECT * FROM `wp_posts` WHERE `ID` = %d&#34;, array($id)));

	if (intval($current_page-&gt;post_parent) &gt; 0)
	{
		$current_parent = $wpdb-&gt;get_row($wpdb-&gt;prepare(&#34;SELECT * FROM `wp_posts` WHERE `ID` = %d&#34;, array(intval($current_page-&gt;post_parent))));
	}

	$markdown = &#39;&#39;;
	$markdown .= &#39;---&#39; . PHP_EOL;
	$markdown .= &#39;title: &#34;&#39; . (isset($current_parent) ? addslashes($current_parent-&gt;post_title) .  &#39; | &#39; : &#39;&#39;) . addslashes($current_page-&gt;post_title) . &#39;&#34;&#39; . PHP_EOL;
	$markdown .= &#39;lastmod: &#34;&#39; . $current_page-&gt;post_modified . &#39;&#34;&#39; . PHP_EOL;
	$markdown .= &#39;date: &#34;&#39; . $current_page-&gt;post_date . &#39;&#34;&#39; . PHP_EOL;
	$markdown .= &#39;type: page&#39; . PHP_EOL;
	$markdown .= &#39;---&#39; . PHP_EOL;
	$markdown .= PHP_EOL;
	$markdown .= md($current_page-&gt;post_content);

	$path = isset($current_parent) ? $current_parent-&gt;post_name : $current_page-&gt;post_name;
	$filename = isset($current_parent) ? $current_page-&gt;post_name . &#39;.md&#39; : &#39;_index.md&#39;;

	return array($markdown, $path, $filename);
}</code></pre></td></tr></table>
</div>
</div>
<p>Pour créer tous mes fichiers, il me suffit alors de boucler sur la liste des ID des pages.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-PHP" data-lang="PHP">$pages = explode(&#39;,&#39;, $wpdb-&gt;get_var(&#34;SELECT GROUP_CONCAT(`ID`) FROM `wp_posts` WHERE `post_status` LIKE &#39;publish&#39; AND `post_type` LIKE &#39;page&#39;&#34;));
foreach ($pages as $id) {
	list($content, $path, $filename) = get_page_content($id);
	mkdir(&#39;hugo/pages/&#39; . $path, 0755, TRUE);
	file_put_contents(&#39;hugo/pages/&#39; . $path . &#39;/&#39; . $filename, $content);
}</code></pre></td></tr></table>
</div>
</div>
<h2 id="vérfier-le-contenu-et-importer-les-images">Vérfier le contenu et importer les images</h2>
<p>Je vais vous l&rsquo;avouer tout de suite, c&rsquo;est la partie casse-coui****s de la migration. La vérification est optionnelle, il est possible de se satisfaire de la correction des erreurs remontées par Hugo. Quant aux images, un copié/collé de <code>wp-content/uploads</code> et le tour est joué. Mais je ne trouve pas ça très propre et quitte à migrer, autant faire les choses bien.</p>
<p>Pour les images, j&rsquo;ai créé un répertoire <code>static/media</code> dans lequel je mets toutes mes images triée par années et par mois. Pour un article de décembre 2017, mes images seront dans <code>static/media/2017/12</code>. Pour les pages, je crée un répertoire par page ou groupe de pages.</p>
<p>Ensuite, j&rsquo;ai parcouru tous les articles pour vérifier la syntaxe du Markdown, ajouter des shortcodes et inclure les images. Puisque par la suite, je vais avoir besoin d&rsquo;ajouter des images aux futurs articles, je me suis dit qu&rsquo;il me fallait quelque chose pour redimensionner mes images. J&rsquo;ai donc implémenté un petit script qui <a href="/console/redimensionner-images-python/">copie et redimensionne une image</a>.</p>
<h2 id="rediriger-son-ancien-site-wordpress-vers-hugo">Rediriger son ancien site WordPress vers Hugo</h2>


    
    





<div class="alert alert-info" role="alert">
    <i class="fa fa-info-circle"></i>&nbsp;Si vous ne changez pas de nom de domaine, vous pouvez ignorer cette dernière partie. Pour ma part, je suis passé de <a href="http://tuto-wibb.krafft.ovh/">http://tuto-wibb.krafft.ovh/</a> à <a href="https://vonkrafft.fr/,">https://vonkrafft.fr/,</a> et donc j&rsquo;avais besoin de mettre en place une redirection.
</div>
<p>Voilà, un joli site statique avec Hugo, tout beau tout neuf, mais que faire de l&rsquo;ancien site ? Il faut surtout éviter de le supprimer, ou en tout cas pas tout de suite. Aussi longtemps que possible, il faut mettre en place une redirection permanente vers vos nouveaux articles.</p>
<p>Pour cela, on va créer un fichier <code>index.php</code> à la racine du WordPress (sans oublié de faire une copie de l&rsquo;ancien fichier vers un fichier <code>index.php.initial</code> par exemple).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-PHP" data-lang="PHP"><span class="ni">&amp;lt;</span>?php    
require_once(dirname(__FILE__) . &#39;/wp-load.php&#39;);
global $wpdb;

$actual_link = (isset($_SERVER[&#39;HTTPS&#39;]) ? &#34;https&#34; : &#34;http&#34;) . &#34;://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]&#34;;
$id = url_to_postid($actual_link);

$type = $wpdb-&gt;get_var($wpdb-&gt;prepare(&#39;SELECT `post_type` FROM `wp_posts` WHERE `ID` = %d&#39;, $id));
if ($type === &#39;page&#39;)
{
	$parent_id = $wpdb-&gt;get_var($wpdb-&gt;prepare(&#39;SELECT `post_parent` FROM `wp_posts` WHERE `ID` = %d&#39;, $id));
	$path = $parent_id ? $wpdb-&gt;get_var($wpdb-&gt;prepare(&#39;SELECT `post_name` FROM `wp_posts` WHERE `ID` = %d&#39;, $parent_id)) . &#39;/&#39; : &#39;&#39;;
}
else
{
	$path = strtolower($wpdb-&gt;get_var($wpdb-&gt;prepare(&#39;SELECT `name` FROM `wp_term_taxonomy` AS tt JOIN `wp_term_relationships` AS tr ON tt.`term_taxonomy_id` = tr.`term_taxonomy_id` JOIN `wp_terms` AS t ON tt.`term_id` = t.`term_id` WHERE tr.`object_id` = %d AND tt.`taxonomy` = %s&#39;, array($id, &#39;category&#39;)))) . &#39;/&#39;;
}
$slug = $wpdb-&gt;get_var($wpdb-&gt;prepare(&#39;SELECT `post_name` FROM `wp_posts` WHERE `ID` = %d&#39;, $id));

$new_link = &#34;https://vonkrafft.fr/$path$slug/&#34;;

header(&#39;Status: 301 Moved Permanently&#39;, False, 301);      
header(&#39;Location: &#39; . $new_link);      
exit();</code></pre></td></tr></table>
</div>
</div>
<p>Bon, ça casse pas trois pattes à un canard. Tout d&rsquo;abord, on récupère l&rsquo;URL et l&rsquo;ID associé à l&rsquo;URL. Si c&rsquo;est une page, la nouvelle URL débutera par le slug de la page parente, si page parente il y a. Si c&rsquo;est un article, la nouvelle URL débutera par le slug de la catégorie. Enfin, on récupère le slug du post pour terminer la nouvelle URL.</p>
<p>La redirection doit être permanente, avec le code HTTP 301 (Moved Permanently). Cela permet de faire comprendre aux navigateurs et aux robots que le site est définitivement à cette nouvelle adresse.</p>
<p>Le fichier <code>index.php</code> doit être conservé le plus longtemps possible (cela nécessite un serveur et un nom de domaine). Lorsque le serveur ne sera plus disponible, il faudra ajouter une entrée DNS <code>CNAME</code> de votre ancien nom de domaine vers votre nouveau nom de domaine. Et lorsque votre ancien nom de domaine ne sera plus disponible, et bien tant pis &hellip;</p>
<h2 id="conclusion">Conclusion</h2>
<p>On a donc des fonctions PHP pour :</p>
<ul>
<li>Convertir le contenu d&rsquo;un post WordPress en Markdown (je reste ouvert aux suggestions d&rsquo;amélioration) ;</li>
<li>Générer un export d&rsquo;un article (type <code>post</code>) ;</li>
<li>Générer un export d&rsquo;une page (type <code>page</code>) ;</li>
<li>Mettre en place une rediretcion dans le cas d&rsquo;un changement de domaine.</li>
</ul>
<p>En mixant tout ça, vous pouvez à présent migrer votre site WordPress vers Hugo. Tout n&rsquo;est pas automatisé, une longue phase de vérification est nécessaire pour chaque fichier Markdown, surtout si comme moi vous choisissez de revoir toutes vos illustrations.</p>
<p>En espérant en aider (et en motiver) certains à migrer vers un site statique :)</p>
  </div>

  <footer>
    <ul class="stats">
  <li class="categories">
    <ul>
        
            
            
                <i class="fa fa-folder"></i>
                
                
                <li><a class="article-category-link" href="/categories/guides">Guides</a></li>
                
            
        
    </ul>
  </li>
  <li class="tags">
    <ul>
        
            
            
                <i class="fa fa-tags"></i>
                
                
                <li><a class="article-category-link" href="/tags/wordpress">Wordpress</a></li>
                
                
                <li><a class="article-category-link" href="/tags/hugo">Hugo</a></li>
                
            
        
    </ul>
  </li>
</ul>

  </footer>

  <div class="post-copyright">
    <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Licence Creative Commons" class="img-cc" src="/img/by-sa_4.0_80x15.png" /></a> Cet article est mis à disposition selon les termes de la <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Licence Creative Commons Attribution-ShareAlike 4.0 International</a>.
    
    Cet article a été publié il y a <strong>855</strong> jours, son contenu peut être inexact, voire erroné, et l'application des conseils ou consignes présents dans cet article doit être fait à votre propre appréciation. L'auteur de l'article ne pourra être tenu responsable des inconvénients pouvant résulter de l'application des conseils et consignes énoncés dans cet article.
    
  </div>

</article>

    <article class="post">
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "vonkrafft" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </article>


<ul class="actions pagination">
    
        <li><a href="/guides/trucs-astuces-liseuses-kobo/"
                class="button big previous">Trucs et astuces pour les liseuses Kobo</a></li>
    

    
        <li><a href="/guides/installer-python-3.7-debian-9-strecth/"
                class="button big next">Installer Python 3.7 sur Debian 9 Stretch</a></li>
    
</ul>


    </div>
    
<section id="sidebar">

  
  <section id="intro">
    
    
      
        <a href='/' class="logo"><img src="/img/avatar.jpg" alt="vonKrafft" /></a>
      
    
    
      <header>
        <h2>vonKrafft</h2>
        <p>Chronicles of a cybersecurity engineer</p>
      </header>
    
    
      <ul class="icons">
        
          
    <li><a href="/index.xml" type="application/rss+xml" target="_blank" title="RSS" class="fa fa-rss"></a></li>


        
        
  <li><a href="//github.com/vonKrafft" target="_blank" title="GitHub" class="fa fa-github"></a></li>

























  <li><a href="//linkedin.com/in/wandrillekrafft" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>



































  <li><a href="//twitter.com/v0nkrafft" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>



















  <li><a href="mailto:contact%20at%20vonkrafft.fr" title="Email" class="fa fa-envelope"></a></li>


      </ul>
    
  </section>

  
  <section class="recent-posts">
    <div class="mini-posts">
      <header>
        <h3>Articles Récents</h3>
      </header>
      <div class="posts-container">
        

        
          
        

        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/write-up/ctf-tamu-obituary-500/">[EN] [CTF] TAMU - Obituary</a>
              </h3>
              
              <time class="published" datetime='2020-03-30'>
                30 mars 2020
              </time>
            </header>
            <a href="/write-up/ctf-tamu-obituary-500/" class="image"><img src="/media/2020/03/f7e59c09e1d415108b97139ba3306e77.png" alt=""></a>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/tutoriels/prises-conectees-sonoff-tasmota/">Des prises connectées Sonoff avec Tasmota</a>
              </h3>
              
              <time class="published" datetime='2020-03-29'>
                29 mars 2020
              </time>
            </header>
            <a href="/tutoriels/prises-conectees-sonoff-tasmota/" class="image"><img src="/media/2020/03/a6c629a0985665748bfb63318a02a126.png" alt=""></a>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/write-up/ctf-esgi-my-name-is-rookie-350/">[CTF] ESGI - My Name is Rookie</a>
              </h3>
              
              <time class="published" datetime='2019-04-07'>
                7 avril 2019
              </time>
            </header>
            <a href="/write-up/ctf-esgi-my-name-is-rookie-350/" class="image"><img src="/media/2019/04/521d3bc39a409ad016ea111cc08c63cb.png" alt=""></a>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/console/serveur-web-docker-nginx-php-postgres/">Serveur Web avec Docker : Nginx, PHP et PostgreSQL</a>
              </h3>
              
              <time class="published" datetime='2019-03-18'>
                18 mars 2019
              </time>
            </header>
            <a href="/console/serveur-web-docker-nginx-php-postgres/" class="image"><img src="/media/2019/03/bff132734906900fcbf309071ae72229.png" alt=""></a>
            

          </article>
        
      </div>

      
        <a href=
          
            /page/2
          
        class="button">Voir plus d'articles</a>
      
    </div>
  </section>

  
  
  
  
  
    <section id="categories">
      <header>
        <h3>
          <a href="/categories/">Catégories</a>
        </h3>
      </header>
        
          
        

        
        <p>
          <article>
            <header>
              
                <a href="/categories/actus/">actus</a>
                <span style="float:right;">16</span>
              
            </header>
          </article>
        </p>
        
        <p>
          <article>
            <header>
              
                <a href="/categories/guides/">guides</a>
                <span style="float:right;">13</span>
              
            </header>
          </article>
        </p>
        
        <p>
          <article>
            <header>
              
                <a href="/categories/tutoriels/">tutoriels</a>
                <span style="float:right;">12</span>
              
            </header>
          </article>
        </p>
        
        <p>
          <article>
            <header>
              
                <a href="/categories/dossiers/">dossiers</a>
                <span style="float:right;">11</span>
              
            </header>
          </article>
        </p>
        
        <p>
          <article>
            <header>
              
                <a href="/categories/console/">console</a>
                <span style="float:right;">8</span>
              
            </header>
          </article>
        </p>
        
        <p>
          <article>
            <header>
              
                <a href="/categories/write-up/">write-up</a>
                <span style="float:right;">5</span>
              
            </header>
          </article>
        </p>
        
        <p>
          <article>
            <header>
              
                <a href="/categories/securite/">securite</a>
                <span style="float:right;">3</span>
              
            </header>
          </article>
        </p>
        
    </section>
  
  

  
  

  
  <section id="footer">
    
      <ul class="icons">
        
          
    <li><a href="/index.xml" type="application/rss+xml" target="_blank" title="RSS" class="fa fa-rss"></a></li>


        
        
  <li><a href="//github.com/vonKrafft" target="_blank" title="GitHub" class="fa fa-github"></a></li>

























  <li><a href="//linkedin.com/in/wandrillekrafft" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>



































  <li><a href="//twitter.com/v0nkrafft" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>



















  <li><a href="mailto:contact%20at%20vonkrafft.fr" title="Email" class="fa fa-envelope"></a></li>


      </ul>
    
    <p class="copyright">
      
        &copy; 2020
        
          vonKrafft
        
      .
      Powered by <a href="//gohugo.io" target="_blank">Hugo</a>
    </p>
  </section>
</section>

    </div>

    <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>

    
        <script src="/js/highlight/highlight-9.11.0.min.js"></script>
        
        
        
        <script src='/js/highlight/yaml.min.js'></script>
        <script src='/js/highlight/css.min.js'></script>
        <script src='/js/highlight/shell.min.js'></script>
        <script src='/js/highlight/php.min.js'></script>
        <script src='/js/highlight/python.min.js'></script>
        <script src='/js/highlight/nginx.min.js'></script>
        <script src='/js/highlight/dockerfile.min.js'></script>
        <script src='/js/highlight/apache.min.js'></script>
        <script src='/js/highlight/bash.min.js'></script>
        <script>hljs.initHighlightingOnLoad();</script>
    

    <script src='/js/jquery-3.2.1.min.js'></script>
    <script src='/js/skel.min.js'></script>
    <script src='/js/jquery.fancybox.min.js'></script>
    <script src='/js/util.js'></script>
    <script src='/js/main.js'></script>
    <script src='/js/backToTop.js'></script>

</body>
</html>
